<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="copyright" content="© 2025 Pranshu Kumar Chaudhary. All Rights Reserved.">
    <meta name="author" content="Pranshu Kumar Chaudhary">
    <!-- ===== CUSTOMIZATION POINT 1: Update page title ===== -->
    <title>[TOPIC] Technology Radar - TRL Visualization</title>
    <link rel="stylesheet" href="experimental-design.css">
    <style>
        /* Clean Radar Visualization Styles */
        body {
            background: var(--color-white);
            color: var(--color-black);
            overflow-x: hidden;
            font-family: var(--font-primary);
        }

        .radar-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--color-white);
        }

        .radar-header {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
        }

        .radar-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-electric-blue);
            margin: 0;
        }

        .radar-subtitle {
            font-size: 12px;
            color: var(--color-gray-600);
            margin: 5px 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .trl-info-btn {
            background: var(--color-electric-blue) !important;
            color: var(--color-white) !important;
            border-color: var(--color-electric-blue) !important;
        }

        .trl-info-btn:hover {
            background: var(--color-electric-blue-dark) !important;
            border-color: var(--color-electric-blue-dark) !important;
            color: var(--color-white) !important;
        }

        .controls-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-group {
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .control-label {
            font-size: 10px;
            color: var(--color-gray-600);
            text-transform: uppercase;
            margin-bottom: 5px;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .filter-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 5px 10px;
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            color: var(--color-gray-700);
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: var(--color-electric-blue-bg);
            border-color: var(--color-electric-blue);
            color: var(--color-electric-blue);
        }

        .filter-btn.active {
            background: var(--color-electric-blue);
            border-color: var(--color-electric-blue);
            color: var(--color-white);
        }

        .radar-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .zoom-controls {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            background: var(--color-white);
            border: 1px solid var(--color-gray-300);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            font-weight: 600;
            color: var(--color-gray-700);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:hover {
            background: var(--color-electric-blue);
            color: var(--color-white);
            border-color: var(--color-electric-blue);
        }

        .info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.4s ease;
            max-height: 400px;
            overflow-y: auto;
        }

        .info-panel.active {
            opacity: 1;
            transform: translateY(0);
        }

        .info-title {
            font-size: 18px;
            color: var(--color-electric-blue);
            margin: 0 0 10px 0;
            font-weight: 700;
        }

        .info-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-badge {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .meta-research { background: var(--color-electric-blue); color: var(--color-white); }
        .meta-industry { background: var(--color-gray-800); color: var(--color-white); }
        .meta-emerging { background: var(--color-gray-600); color: var(--color-white); }
        .meta-experimental { background: var(--color-electric-blue-dark); color: var(--color-white); }

        .info-description {
            color: var(--color-gray-700);
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .references-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--color-gray-200);
        }

        .references-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-black);
            margin-bottom: 10px;
        }

        .reference-item {
            margin-bottom: 8px;
            font-size: 12px;
            color: var(--color-gray-600);
        }

        .reference-link {
            color: var(--color-electric-blue);
            text-decoration: none;
        }

        .reference-link:hover {
            text-decoration: underline;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .progress-item {
            background: var(--color-gray-50);
            border: 1px solid var(--color-gray-200);
            border-radius: 5px;
            padding: 10px;
        }

        .progress-label {
            font-size: 10px;
            color: var(--color-gray-600);
            text-transform: uppercase;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-gray-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-electric-blue);
            transition: width 0.8s ease;
        }

        .progress-value {
            font-size: 12px;
            color: var(--color-electric-blue);
            font-weight: 600;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: var(--color-gray-500);
            font-size: 20px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: var(--color-electric-blue);
        }

        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: var(--color-white);
            border: 1px solid var(--color-gray-200);
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .trl-info-panel {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-white);
            border: 2px solid var(--color-electric-blue);
            border-radius: 10px;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            z-index: 200;
        }

        .trl-info-panel.active {
            opacity: 1;
            visibility: visible;
        }

        .trl-info-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-electric-blue);
            margin-bottom: 15px;
        }

        .trl-info-content {
            color: var(--color-gray-700);
            line-height: 1.6;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .trl-levels-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .trl-level-item {
            padding: 8px;
            background: var(--color-gray-50);
            border-radius: 4px;
            font-size: 11px;
            text-align: center;
        }

        .trl-level-number {
            font-weight: 600;
            color: var(--color-electric-blue);
        }

        .close-info-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            color: var(--color-gray-500);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-info-btn:hover {
            color: var(--color-electric-blue);
        }

        .legend-title {
            font-size: 12px;
            color: var(--color-electric-blue);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            font-size: 10px;
            color: var(--color-gray-700);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #00f5ff;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        @media (max-width: 1024px) {
            .radar-container {
                height: auto;
                min-height: 100vh;
                padding-bottom: 20px;
            }

            .radar-header {
                position: static;
                margin: 20px;
            }

            .radar-canvas {
                position: relative;
                width: 100%;
                height: 70vh;
            }

            .controls-panel {
                position: static;
                margin: 10px 20px 0 20px;
            }

            .legend {
                position: static;
                margin: 10px 20px;
            }

            .zoom-controls {
                position: static;
                transform: none;
                flex-direction: row;
                justify-content: center;
                margin: 10px 0;
            }
        }

        @media (max-width: 768px) {
            .radar-container {
                height: auto;
                min-height: 100vh;
                padding-bottom: 16px;
            }

            .radar-title {
                font-size: 18px;
            }

            .radar-header {
                position: static;
                margin: 16px;
            }

            .radar-canvas {
                position: relative;
                width: 100%;
                height: 60vh;
            }

            .controls-panel {
                position: static;
                top: auto;
                right: auto;
                margin: 10px 16px 0 16px;
            }

            .legend {
                position: static;
                bottom: auto;
                right: auto;
                margin: 10px 16px;
            }

            .zoom-controls {
                position: static;
                transform: none;
                flex-direction: row;
                justify-content: center;
                margin: 10px 0;
            }
        }
    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R4MBJ1TPQ5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R4MBJ1TPQ5');
    </script>
</head>
<body>
    <div class="radar-container">
        <div class="radar-header">
            <!-- ===== CUSTOMIZATION POINT 2: Update display title ===== -->
            <h1 class="radar-title">[TOPIC] TECHNOLOGY RADAR</h1>
            <p class="radar-subtitle">Technology Readiness Level Visualization</p>
        </div>

        <div class="controls-panel">
            <div class="control-group">
                <div class="control-label">Filter by Origin</div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">ALL</button>
                    <button class="filter-btn" data-filter="research">RESEARCH</button>
                    <button class="filter-btn" data-filter="industry">INDUSTRY</button>
                    <button class="filter-btn" data-filter="emerging">EMERGING</button>
                    <button class="filter-btn" data-filter="experimental">EXPERIMENTAL</button>
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">Time Period</div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-time="2025">2025</button>
                    <button class="filter-btn" data-time="2020">2020</button>
                    <button class="filter-btn" data-time="2015">2015</button>
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">Learn More</div>
                <div class="filter-buttons">
                    <button class="filter-btn trl-info-btn" onclick="toggleTRLInfo()">WHAT IS TRL?</button>
                </div>
            </div>
        </div>

        <div class="zoom-controls">
            <button class="zoom-btn" id="zoomIn" title="Zoom In">+</button>
            <button class="zoom-btn" id="zoomOut" title="Zoom Out">−</button>
            <button class="zoom-btn" id="resetZoom" title="Reset Zoom">⌂</button>
        </div>

        <svg class="radar-canvas" id="radarSvg"></svg>

        <div class="trl-info-panel" id="trlInfoPanel">
            <button class="close-info-btn" onclick="toggleTRLInfo()">×</button>
            <div class="trl-info-title">Technology Readiness Levels (TRL)</div>
            <!-- ===== CUSTOMIZATION POINT 3: Update TRL description for your topic ===== -->
            <div class="trl-info-content">
                Technology Readiness Levels are a systematic metric used to assess the maturity of a particular technology. Originally developed by NASA, the TRL scale ranges from 1 (basic research) to 9 (proven operational capability).
            </div>
            <div class="trl-levels-grid">
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 1-2</div>
                    <div>Basic Research</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 3</div>
                    <div>Proof of Concept</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 4</div>
                    <div>Lab Validation</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 5</div>
                    <div>Simulated Environment</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 6</div>
                    <div>Prototype Demo</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 7</div>
                    <div>System Integration</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 8</div>
                    <div>System Complete</div>
                </div>
                <div class="trl-level-item">
                    <div class="trl-level-number">TRL 9</div>
                    <div>Proven Operational</div>
                </div>
                <div class="trl-level-item" style="grid-column: span 1; background: var(--color-electric-blue-bg);">
                    <div class="trl-level-number">Click & Explore</div>
                    <div>Interactive Technologies</div>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-title">TRL Levels</div>
            <div class="legend-item">
                <div class="legend-color" style="background: #a3a3a3;"></div>
                <span>TRL 1-3: Research</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #525252;"></div>
                <span>TRL 4-6: Development</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4040ff;"></div>
                <span>TRL 7-9: Deployment</span>
            </div>
        </div>

        <div class="info-panel" id="infoPanel">
            <button class="close-btn" onclick="closeInfoPanel()">×</button>
            <div id="infoPanelContent">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>

        <div class="loading" id="loadingIndicator">Initializing Radar...</div>
    </div>

    <script>
        // ===== CUSTOMIZATION POINT 4: Technology data for different years =====
        // Each technology object should have:
        // - id: unique identifier (lowercase-with-hyphens)
        // - name: display name
        // - category: 'research', 'industry', 'emerging', or 'experimental'
        // - trl: Technology Readiness Level (1-9)
        // - angle: position on the radar (0-360 degrees)
        // - progress: object with research, funding, timeline, consensus (0-100 percentages)

        const technologyData = {
            2015: [
                { id: 'example-tech-1', name: 'Example Technology 1', category: 'research', trl: 3, angle: 0, progress: { research: 40, funding: 35, timeline: 30, consensus: 40 } },
                { id: 'example-tech-2', name: 'Example Technology 2', category: 'industry', trl: 6, angle: 45, progress: { research: 75, funding: 80, timeline: 70, consensus: 75 } },
                // Add more technologies...
            ],
            2020: [
                { id: 'example-tech-1', name: 'Example Technology 1', category: 'research', trl: 5, angle: 0, progress: { research: 65, funding: 60, timeline: 55, consensus: 65 } },
                { id: 'example-tech-2', name: 'Example Technology 2', category: 'industry', trl: 8, angle: 45, progress: { research: 90, funding: 95, timeline: 88, consensus: 92 } },
                // Add more technologies...
            ],
            2025: [
                { id: 'example-tech-1', name: 'Example Technology 1', category: 'industry', trl: 7, angle: 0, progress: { research: 85, funding: 90, timeline: 80, consensus: 85 } },
                { id: 'example-tech-2', name: 'Example Technology 2', category: 'industry', trl: 9, angle: 45, progress: { research: 98, funding: 100, timeline: 98, consensus: 99 } },
                // Add more technologies...
            ]
        };

        // ===== CUSTOMIZATION POINT 5: Technology descriptions and references =====
        // Add detailed descriptions and academic/industry references for each technology
        const techDescriptions = {
            'example-tech-1': {
                description: 'Detailed description of Example Technology 1, including current state, applications, challenges, and future potential. This should be 3-5 sentences explaining the technology in depth.',
                references: [
                    'Author, A. (2024). Paper Title. Journal Name.',
                    'Author, B. (2023). Another Reference. Conference Name.',
                    'Company Report. (2025). Industry Analysis. Source.'
                ]
            },
            'example-tech-2': {
                description: 'Detailed description of Example Technology 2...',
                references: [
                    'Reference 1...',
                    'Reference 2...'
                ]
            }
            // Add descriptions for all technologies...
        };

        // ===== CUSTOMIZATION POINT 6: Technology connections (optional) =====
        // Define relationships between related technologies to show connections on the radar
        const techConnections = [
            ['example-tech-1', 'example-tech-2'],
            // Add more connections...
        ];

        // ========== GENERIC VISUALIZATION CODE BELOW - NO CHANGES NEEDED ==========

        let currentYear = 2025;
        let currentFilter = 'all';
        let selectedTech = null;

        const width = window.innerWidth;
        const height = window.innerHeight;
        const centerX = width / 2;
        const centerY = height / 2;
        const maxRadius = Math.min(width, height) * 0.4;

        const svg = d3.select('#radarSvg')
            .attr('width', width)
            .attr('height', height);

        const categoryColors = {
            research: 'var(--color-electric-blue)',
            industry: 'var(--color-gray-800)',
            emerging: 'var(--color-gray-600)',
            experimental: 'var(--color-electric-blue-dark)'
        };

        const trlColors = d3.scaleLinear()
            .domain([1, 5, 9])
            .range(['#a3a3a3', '#525252', '#4040ff']);

        let currentZoom = 1;
        const minZoom = 0.5;
        const maxZoom = 3;
        let zoomTransform = d3.zoomIdentity;

        function initVisualization() {
            setupZoom();
            setTimeout(() => {
                document.getElementById('loadingIndicator').style.display = 'none';
                renderRadar();
            }, 1500);
        }

        function setupZoom() {
            const zoom = d3.zoom()
                .scaleExtent([minZoom, maxZoom])
                .on('zoom', handleZoom);

            svg.call(zoom);

            document.getElementById('zoomIn').addEventListener('click', () => {
                svg.transition().duration(300).call(zoom.scaleBy, 1.5);
            });

            document.getElementById('zoomOut').addEventListener('click', () => {
                svg.transition().duration(300).call(zoom.scaleBy, 1 / 1.5);
            });

            document.getElementById('resetZoom').addEventListener('click', () => {
                svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);
            });
        }

        function handleZoom(event) {
            zoomTransform = event.transform;
            svg.select('.radar-content').attr('transform', zoomTransform);
        }

        function renderRadar() {
            svg.selectAll('*').remove();

            const radarContent = svg.append('g').attr('class', 'radar-content');
            const defs = svg.append('defs');

            const shadow = defs.append('filter')
                .attr('id', 'shadow')
                .attr('x', '-50%')
                .attr('y', '-50%')
                .attr('width', '200%')
                .attr('height', '200%');

            shadow.append('feDropShadow')
                .attr('dx', 2)
                .attr('dy', 2)
                .attr('stdDeviation', 3)
                .attr('flood-color', '#000')
                .attr('flood-opacity', 0.2);

            radarContent.append('circle')
                .attr('cx', centerX)
                .attr('cy', centerY)
                .attr('r', maxRadius)
                .attr('fill', '#f8fafc')
                .attr('stroke', '#e2e8f0')
                .attr('stroke-width', 2);

            for (let i = 1; i <= 9; i++) {
                const radius = (maxRadius / 9) * i;

                radarContent.append('circle')
                    .attr('cx', centerX)
                    .attr('cy', centerY)
                    .attr('r', radius)
                    .attr('fill', 'none')
                    .attr('stroke', '#cbd5e1')
                    .attr('stroke-width', 1)
                    .attr('opacity', 0.6);

                if (i % 3 === 0) {
                    radarContent.append('text')
                        .attr('x', centerX + radius + 10)
                        .attr('y', centerY + 5)
                        .attr('fill', '#1e293b')
                        .attr('font-size', '12px')
                        .attr('font-family', 'var(--font-primary)')
                        .attr('font-weight', '600')
                        .text(`TRL ${i}`);
                }
            }

            for (let i = 0; i < 12; i++) {
                const angle = (i * 30) * Math.PI / 180;
                const x2 = centerX + Math.cos(angle) * maxRadius;
                const y2 = centerY + Math.sin(angle) * maxRadius;

                radarContent.append('line')
                    .attr('x1', centerX)
                    .attr('y1', centerY)
                    .attr('x2', x2)
                    .attr('y2', y2)
                    .attr('stroke', '#e2e8f0')
                    .attr('stroke-width', 1)
                    .attr('opacity', 0.5);
            }

            const data = technologyData[currentYear] || technologyData[2025];
            const filteredData = currentFilter === 'all' ? data : data.filter(d => d.category === currentFilter);

            const techGroups = radarContent.selectAll('.tech-node')
                .data(filteredData)
                .enter()
                .append('g')
                .attr('class', 'tech-node')
                .style('cursor', 'pointer')
                .on('click', (event, d) => showTechInfo(d))
                .on('mouseover', function(event, d) {
                    d3.select(this).select('circle')
                        .transition()
                        .duration(200)
                        .attr('r', 12)
                        .attr('filter', 'url(#shadow)');
                })
                .on('mouseout', function(event, d) {
                    d3.select(this).select('circle')
                        .transition()
                        .duration(200)
                        .attr('r', 8)
                        .attr('filter', 'none');
                });

            techGroups.each(function(d) {
                const group = d3.select(this);
                const radius = (maxRadius / 9) * d.trl;
                const angleRad = (d.angle - 90) * Math.PI / 180;
                const x = centerX + Math.cos(angleRad) * radius;
                const y = centerY + Math.sin(angleRad) * radius;

                const nodeColor = getContrastColor(d.category, d.trl);
                group.append('circle')
                    .attr('cx', x)
                    .attr('cy', y)
                    .attr('r', 8)
                    .attr('fill', nodeColor.fill)
                    .attr('stroke', nodeColor.stroke)
                    .attr('stroke-width', 2);

                if (d.trl >= 6 || d.category === 'emerging') {
                    const labelRadius = radius + 25;
                    const labelX = centerX + Math.cos(angleRad) * labelRadius;
                    const labelY = centerY + Math.sin(angleRad) * labelRadius;

                    group.append('text')
                        .attr('x', labelX)
                        .attr('y', labelY)
                        .attr('text-anchor', 'middle')
                        .attr('fill', '#1e293b')
                        .attr('font-size', '10px')
                        .attr('font-family', 'var(--font-primary)')
                        .attr('font-weight', '600')
                        .text(d.name.length > 15 ? d.name.substring(0, 15) + '...' : d.name);
                }
            });

            drawConnections(filteredData);

            svg.selectAll('.tech-node')
                .style('opacity', 0)
                .transition()
                .duration(1000)
                .delay((d, i) => i * 50)
                .style('opacity', 1);
        }

        function getContrastColor(category, trl) {
            const colors = {
                research: { fill: '#4040ff', stroke: '#1e1e8f' },
                industry: { fill: '#1e293b', stroke: '#0f172a' },
                emerging: { fill: '#64748b', stroke: '#475569' },
                experimental: { fill: '#3030dd', stroke: '#1e1e8f' }
            };
            return colors[category] || colors.research;
        }

        function drawConnections(data) {
            const connectionGroup = svg.select('.radar-content').append('g').attr('class', 'connections');

            techConnections.forEach(([source, target]) => {
                const sourceNode = data.find(d => d.id === source);
                const targetNode = data.find(d => d.id === target);

                if (sourceNode && targetNode) {
                    const sourceRadius = (maxRadius / 9) * sourceNode.trl;
                    const targetRadius = (maxRadius / 9) * targetNode.trl;
                    const sourceAngle = (sourceNode.angle - 90) * Math.PI / 180;
                    const targetAngle = (targetNode.angle - 90) * Math.PI / 180;

                    const sourceX = centerX + Math.cos(sourceAngle) * sourceRadius;
                    const sourceY = centerY + Math.sin(sourceAngle) * sourceRadius;
                    const targetX = centerX + Math.cos(targetAngle) * targetRadius;
                    const targetY = centerY + Math.sin(targetAngle) * targetRadius;

                    const midX = (sourceX + targetX) / 2;
                    const midY = (sourceY + targetY) / 2;
                    const controlX = midX + (centerX - midX) * 0.3;
                    const controlY = midY + (centerY - midY) * 0.3;

                    const path = `M ${sourceX},${sourceY} Q ${controlX},${controlY} ${targetX},${targetY}`;

                    connectionGroup.append('path')
                        .attr('d', path)
                        .attr('stroke', '#3b82f6')
                        .attr('stroke-width', 1.5)
                        .attr('fill', 'none')
                        .attr('opacity', 0.6)
                        .attr('stroke-dasharray', '5,5');
                }
            });
        }

        function showTechInfo(tech) {
            selectedTech = tech;
            const infoPanel = document.getElementById('infoPanel');
            const content = document.getElementById('infoPanelContent');

            const techInfo = techDescriptions[tech.id] || {};
            const description = techInfo.description || `${tech.name} is a technology with TRL level ${tech.trl}.`;
            const references = techInfo.references || [];

            content.innerHTML = `
                <h2 class="info-title">${tech.name}</h2>
                <div class="info-meta">
                    <span class="meta-badge meta-${tech.category}">${tech.category.toUpperCase()}</span>
                    <span class="meta-badge" style="background: ${trlColors(tech.trl)}; color: white;">TRL ${tech.trl}</span>
                    <span class="meta-badge" style="background: var(--color-gray-700); color: white;">Year: ${currentYear}</span>
                </div>
                <div class="info-description">
                    ${description}
                </div>
                <div class="progress-grid">
                    ${Object.entries(tech.progress).map(([key, value]) => `
                        <div class="progress-item">
                            <div class="progress-label">${key}</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${value}%;"></div>
                            </div>
                            <div class="progress-value">${value}%</div>
                        </div>
                    `).join('')}
                </div>
                ${references.length > 0 ? `
                    <div class="references-section">
                        <div class="references-title">Key References</div>
                        ${references.map(ref => `
                            <div class="reference-item">• ${ref}</div>
                        `).join('')}
                    </div>
                ` : ''}
            `;

            infoPanel.classList.add('active');
        }

        function closeInfoPanel() {
            document.getElementById('infoPanel').classList.remove('active');
            selectedTech = null;
        }

        function toggleTRLInfo() {
            const trlInfoPanel = document.getElementById('trlInfoPanel');
            trlInfoPanel.classList.toggle('active');
        }

        document.querySelectorAll('[data-filter]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                renderRadar();
            });
        });

        document.querySelectorAll('[data-time]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-time]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentYear = parseInt(this.dataset.time);
                renderRadar();
            });
        });

        window.addEventListener('resize', () => {
            location.reload();
        });

        initVisualization();
    </script>
</body>
</html>
